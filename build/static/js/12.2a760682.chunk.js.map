{"version":3,"sources":["assets/img/login-office.jpeg","assets/img/login-office-dark.jpeg","pages/Login.js","apis/Instance.js"],"names":["module","exports","Login","useContext","AuthContext","authInfo","setAuthInfo","useState","setAlert","navigate","useHistory","userInput","React","createRef","passwordInput","className","aria-hidden","src","ImageLight","alt","ImageDark","onSubmit","event","preventDefault","user","current","value","password","data","grant_type","response_type","username","headers","Buffer","from","toString","Instance","post","URLSearchParams","then","response","console","log","status","defaults","common","token_type","access_token","authenticated","tokenInfo","push","catch","error","ref","placeholder","type","axios","create","baseURL"],"mappings":"gIAAAA,EAAOC,QAAU,IAA0B,2C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,mKCkG5BC,UAvFf,WACE,MAAkCC,qBAAWC,KAArCC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,YAClB,EAA0BC,mBAAS,IAAnC,mBAAcC,GAAd,WACMC,EAAWC,cACbC,EAAYC,IAAMC,YAClBC,EAAgBF,IAAMC,YAsC1B,OACE,yBAAKE,UAAU,kEACb,yBAAKA,UAAU,kGACb,yBAAKA,UAAU,6CACb,yBAAKA,UAAU,2BACb,yBACEC,cAAY,OACZD,UAAU,yCACVE,IAAKC,IACLC,IAAI,WAEN,yBACEH,cAAY,OACZD,UAAU,+CACVE,IAAKG,IACLD,IAAI,YAGR,0BAAMJ,UAAU,yDACd,yBAAKA,UAAU,UACb,wBAAIA,UAAU,+DAAd,SACA,0BAAMM,SA1DG,SAACC,GACpBA,EAAMC,iBACNf,EAAS,IACT,IACMgB,EAAOb,EAAUc,QAAQC,MACzBC,EAAWb,EAAcW,QAAQC,MACjCE,EAAO,CACXC,WAAY,WACZC,cAAe,SACfC,SAAUP,EACVG,SAAUA,GAGNK,EAAU,CACd,cAAiB,SAAWC,EAAOC,KAAK,sBAAsBC,SAAS,UAEvE,eAAgB,qCAGlBC,IAASC,KAhBQ,wBAgBO,IAAIC,gBAAgBV,GAAO,CAAEI,QAASA,IAC3DO,MAAK,SAAAC,GAEJ,GADAC,QAAQC,IAAIF,GACY,MAApBA,EAASG,OAMX,OALAF,QAAQC,IAAI,OACZN,IAASQ,SAASZ,QAAQa,OAA1B,wBAAuDL,EAASZ,KAAKkB,WAArE,YAAmFN,EAASZ,KAAKmB,cACjGzC,EAAY,2BAAKD,GAAN,IAAgB2C,eAAe,EAAMxB,KAAMA,EAAMyB,UAAWT,EAASZ,QAChFnB,EAASyC,KAAK,kBAEP,QAERC,OAAM,SAAAC,GACPX,QAAQC,IAAIU,GAEZhB,IAASQ,SAASZ,QAAQa,OAA1B,cAAoD,KACpDrC,EAAS,QAAD,OAASgB,EAAT,2EAyBA,kBAAC,QAAD,KACE,0CACA,kBAAC,QAAD,CAAOT,UAAU,OAAOsC,IAAK1C,EAAY2C,YAAY,cAGvD,kBAAC,QAAD,CAAOvC,UAAU,QACf,0CACA,kBAAC,QAAD,CAAOA,UAAU,OAAOwC,KAAK,WAAWF,IAAKvC,EAAewC,YAAY,qBAG1E,kBAAC,SAAD,CAAQC,KAAK,SAASxC,UAAU,QAAhC,kB,yDCtFhB,YAEMqB,EAFN,OAEiBoB,EAAMC,OAAO,CAC1BC,QAAS,iCAET1B,QAAQ,KAGGI","file":"static/js/12.2a760682.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/login-office.72742c2e.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/login-office-dark.cb4a995f.jpeg\";","import React from 'react'\r\nimport { useContext, useState } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport Instance from '../apis/Instance.js'\r\nimport { AuthContext } from '../context/AuthContext'\r\n\r\nimport ImageLight from '../assets/img/login-office.jpeg'\r\nimport ImageDark from '../assets/img/login-office-dark.jpeg'\r\nimport { GithubIcon, TwitterIcon } from '../icons'\r\nimport { Label, Input, Button, HelperText } from '@windmill/react-ui'\r\n\r\nfunction Login() {\r\n  const { authInfo, setAuthInfo } = useContext(AuthContext);\r\n  const [alert, setAlert] = useState('');\r\n  const navigate = useHistory();\r\n  let userInput = React.createRef();\r\n  let passwordInput = React.createRef();\r\n  const authenticate = (event) => {\r\n    event.preventDefault();\r\n    setAlert('');\r\n    const endpoint = \"/SASLogon/oauth/token\";\r\n    const user = userInput.current.value;\r\n    const password = passwordInput.current.value;\r\n    const data = {\r\n      grant_type: \"password\",\r\n      response_type: \"bearer\",\r\n      username: user,\r\n      password: password\r\n    };\r\n\r\n    const headers = {\r\n      'Authorization': \"Basic \" + Buffer.from('viya_app1:Orion123').toString('base64'),\r\n      //'Authorization': \"Basic \" + btoa('viya_app1:Orion123'),\r\n      'Content-Type': 'application/x-www-form-urlencoded'\r\n    };\r\n\r\n    Instance.post(endpoint, new URLSearchParams(data), { headers: headers })\r\n      .then(response => {\r\n        console.log(response);\r\n        if (response.status === 200) {\r\n          console.log(\"yes\");\r\n          Instance.defaults.headers.common['Authorization'] = `${response.data.token_type} ${response.data.access_token}`;\r\n          setAuthInfo({ ...authInfo, authenticated: true, user: user, tokenInfo: response.data });\r\n          navigate.push(\"/app/dashboard\");\r\n          // setAlert(`User Authenticated!`);\r\n          return null;\r\n        }\r\n      }).catch(error => {\r\n        console.log(error);\r\n\r\n        Instance.defaults.headers.common['Authorization'] = null;\r\n        setAlert(`User ${user} could not be authenticated, please check user name and password!`);\r\n      });\r\n  }\r\n  return (\r\n    <div className=\"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900\">\r\n      <div className=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800\">\r\n        <div className=\"flex flex-col overflow-y-auto md:flex-row\">\r\n          <div className=\"h-32 md:h-auto md:w-1/2\">\r\n            <img\r\n              aria-hidden=\"true\"\r\n              className=\"object-cover w-full h-full dark:hidden\"\r\n              src={ImageLight}\r\n              alt=\"Office\"\r\n            />\r\n            <img\r\n              aria-hidden=\"true\"\r\n              className=\"hidden object-cover w-full h-full dark:block\"\r\n              src={ImageDark}\r\n              alt=\"Office\"\r\n            />\r\n          </div>\r\n          <main className=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\r\n            <div className=\"w-full\">\r\n              <h1 className=\"mb-4 text-xl font-semibold text-gray-700 dark:text-gray-200\">Login</h1>\r\n              <form onSubmit={authenticate}>\r\n                <Label>\r\n                  <span>Username</span>\r\n                  <Input className=\"mt-1\" ref={userInput}  placeholder=\"Username\" />\r\n                </Label>\r\n\r\n                <Label className=\"mt-4\">\r\n                  <span>Password</span>\r\n                  <Input className=\"mt-1\" type=\"password\" ref={passwordInput} placeholder=\"***************\" />\r\n                </Label>\r\n                {/* block tag={Link} to=\"/app\" */}\r\n                <Button type=\"submit\" className=\"mt-4\" >\r\n                  Log in\r\n                </Button>\r\n              </form>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login","import axios from 'axios';\r\n\r\nconst Instance = axios.create({\r\n    baseURL: \"https://sasserver.demo.sas.com\",\r\n    //baseURL: \"http://10.96.12.143\",\r\n    headers:{}\r\n});\r\n\r\nexport default Instance;"],"sourceRoot":""}